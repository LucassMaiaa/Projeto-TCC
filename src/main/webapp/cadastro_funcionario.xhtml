<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<!-- Usando o template SEM sidebar -->
<ui:composition template="/WEB-INF/template.xhtml">

	<!-- Título da página -->
	<ui:define name="title">Cadastro de Funcionários - BarberSys</ui:define>
	
	<!-- CSS específico desta página -->
	<ui:define name="extra-css">
		<h:outputScript library="primefaces" name="locales/locale-pt.js" />
		<style>
.content-info-lateral {
	background: #FCFCFF;
}

.header-filters {
	margin-top: 9px;
}

.perfil-top-funcionario {
	height: 28px;
	width: 28px;
	background-size: cover;
	margin: 0;
}

.dataList-custom.ui-datalist .ui-datalist-content {
	min-height: calc(100vh - 400px);
	max-height: calc(100vh - 400px);
	overflow-y: auto;
}

body .dataList-dialog-custom.ui-datalist .ui-datalist-content {
	min-height: 211px;
	max-height: 300px;
	overflow-y: auto;
}

body .data-list-time.ui-datalist .ui-datalist-content {
	min-height: 211px;
	max-height: 250px;
	overflow-y: auto;
}

body .ui-datalist .ui-datalist-content {
	border: none;
	padding: 0;
}

.dataList-custom.ui-datalist .ui-datalist-empty-message {
	min-height: calc(100vh - 400px);
	display: flex;
	justify-content: center;
	align-items: center;
	font-size: 17px !important;
	font-weight: bold;
}

.data-list-time.ui-datalist .ui-datalist-empty-message {
	min-height: 211px;
	display: flex;
	justify-content: center;
	align-items: center;
	font-size: 14px;
	font-weight: bold;
}

/* Estilos para dias da semana */
.dias-semana-container {
	display: flex;
	gap: 15px;
	flex-wrap: wrap;
	padding: 10px 0;
}

.dia-checkbox {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 5px;
}

.dia-checkbox .ui-chkbox {
	margin: 0 !important;
}

.dia-label {
	font-size: 12px;
	font-weight: 500;
	color: #495057;
	cursor: pointer;
}

/* Horário estendido com dias */
.list-time-extended {
	position: relative;
	background: #FFFFFF;
	border: 1px solid #DDE3DF;
	border-radius: 8px;
	padding: 12px 15px;
	margin-bottom: 10px;
	display: flex;
	flex-direction: column;
	gap: 10px;
}

.horario-info {
	display: flex;
	align-items: center;
	gap: 10px;
}

.horario-info .fa-solid {
	color: #6C757D;
	font-size: 16px;
}

.horario-info > div {
	display: flex;
	flex-direction: column;
}

.horario-info > div label {
	margin: 0;
}

.dias-info {
	display: flex;
	gap: 6px;
	padding-left: 26px;
}

.dia-badge {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 24px;
	height: 24px;
	border-radius: 50%;
	font-size: 10px;
	font-weight: 600;
	transition: all 0.2s ease;
}

.dia-badge.ativo {
	background-color: #28a745;
	color: white;
}

.dia-badge.inativo {
	background-color: #E9ECEF;
	color: #ADB5BD;
}

.list-time-extended .btn-trash {
	position: absolute;
	right: 12px;
	top: 50%;
	transform: translateY(-50%);
}

body .data-list-time.ui-datalist .ui-datalist-content {
	min-height: 250px;
	max-height: 350px;
}

/* Seções do formulário */
.section-title {
	display: flex;
	align-items: center;
	gap: 10px;
	padding-bottom: 10px;
	    margin: 15px 0 15px;
	border-bottom: 2px solid #E7F3F5;
}

.section-title i {
	color: #4CAF50;
	font-size: 18px;
}

.section-title label {
	font-size: 16px;
	font-weight: 600;
	color: #2C3E50;
	margin: 0;
}

.no-filter{
margin: 0px
}

/* Melhorias nos cards de horário */
.list-time-extended {
	transition: all 0.2s ease;
	border: 1px solid #E0E0E0;
}

.list-time-extended:hover {
	box-shadow: 0 2px 8px rgba(0,0,0,0.08);
	border-color: #4CAF50;
}

.horario-card-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 8px;
}

.horario-tempo {
	display: flex;
	align-items: center;
	gap: 8px;
	font-weight: 600;
	color: #2C3E50;
}

/* Ajustes no modal */
body .ui-dialog#dlgFunc {
	width: 700px !important;
}

.dialog-scroll {
	max-height: 65vh;
	overflow-y: auto;
	overflow-x: hidden;
	padding: 0 15px 15px 0;
	margin-right: -15px;
}

.dialog-scroll::-webkit-scrollbar {
	width: 8px;
}

.dialog-scroll::-webkit-scrollbar-track {
	background: #F5F5F5;
	border-radius: 10px;
}

.dialog-scroll::-webkit-scrollbar-thumb {
	background: #BDBDBD;
	border-radius: 10px;
}

.dialog-scroll::-webkit-scrollbar-thumb:hover {
	background: #9E9E9E;
}

/* Título das seções menores */
.title-item {
	font-size: 14px !important;
	font-weight: 600 !important;
	color: #546E7A;
	display: block;
}

body .ui-chkbox .ui-chkbox-box .ui-chkbox-icon {
    transform: translate(2%, -16%);
}
		</style>
	</ui:define>

	<!-- Conteúdo da página -->
	<ui:define name="content">
	
		<!-- Título da página -->
		<div class="flex space-between">
			<p:outputLabel class="title-page" value="Cadastro de Funcionários" />
		</div>

		<div class="header-filters">
			<div class="row">
				<div class="col-md-3 input-combined-no-text">
					<p:inputText value="#{funcionarioController.nomeFuncionario}" autocomplete="off"
						placeholder="Pesquisar funcionário">
						<p:ajax event="keyup" delay="100" update="@form" process="@this" />
					</p:inputText>
					<i class="fa-solid fa-magnifying-glass"></i>
				</div>
				<div class="col-md-4">
					<div class="content-filter ">
						<i class="fa-solid fa-filter"></i>
						<p:selectOneButton
							value="#{funcionarioController.statusSelecionado}"
							unselectable="false">
							<f:selectItem itemLabel="Todos" itemValue="" />
							<f:selectItem itemLabel="Ativos" itemValue="A" />
							<f:selectItem itemLabel="Inativos" itemValue="I" />
							<p:ajax update="@form" process="@this" />
						</p:selectOneButton>
					</div>
				</div>
			</div>
		</div>

		<div class="flex align-center mt15 mb15">
			<p:commandButton
				actionListener="#{funcionarioController.novoFuncionario()}"
				update="form:dlgFunc" process="@this" class="btn-circle-green"
				icon="fa fa-plus" oncomplete="PF('dlgFunc').show()" />
			<label class="title-button ml8">Novo funcionário</label>
		</div>

		<div>
			<p:dataList id="datatableCaixas" rowIndexVar="row"
				class="dataList-custom"
				value="#{funcionarioController.lstFuncionario}" var="funcionario"
				paginator="true" paginatorPosition="bottom" rows="16" lazy="true"
				emptyMessage="Nenhum dado encontrado">
				<p:commandLink
					actionListener="#{funcionarioController.funcionarioSelecionado(funcionario)}"
					update="form:dlgFunc" process="@this"
					oncomplete="PF('dlgFunc').show()">
					<div
						class="card-list #{funcionario.status == 'I' ? 'inativo' : 'ativo'}">
						<div>
							<label class="title-list">Funcionário</label>
							<p:outputLabel styleClass="subtitle-list"
								value="#{funcionario.nome}" />
						</div>
					</div>
				</p:commandLink>
			</p:dataList>
		</div>

		<p:dialog id="dlgFunc" widgetVar="dlgFunc" modal="true"
			showEffect="fade" hideEffect="fade" closable="false"
			draggable="false" resizable="false" width="1100">
			<h:panelGroup id="dlgFuncForm">
				<div class="header-modal">
					<div class="flex align-center">
						<div class="icon-circle">
							<ui:fragment rendered="#{funcionarioController.editarModel eq 'A'}">
								<i class="fa-solid fa-pen"></i>
							</ui:fragment>
							<ui:fragment rendered="#{funcionarioController.editarModel eq 'I'}">
								<i class="fa-solid fa-user-plus"></i>
							</ui:fragment>
						</div>
						<label>#{funcionarioController.editarModel eq 'A' ?
							'Editar Funcionário' : 'Novo Funcionário'}</label>
					</div>
					<div class="flex align-center">
						<ui:fragment
							rendered="#{funcionarioController.editarModel eq 'A'}">
							<!-- Botão de deletar REMOVIDO - use o botão INATIVO para desativar funcionários -->
							<p:commandButton update="dlgFuncForm" process="@form"
								actionListener="#{funcionarioController.prepararSalvarFuncionario()}"
								styleClass="btn btn-green" value="Salvar" />
						</ui:fragment>
						<ui:fragment
							rendered="#{funcionarioController.editarModel eq 'I'}">
							<p:commandButton update="dlgFuncForm" process="@form"
								actionListener="#{funcionarioController.prepararSalvarFuncionario()}"
								styleClass="btn btn-green" value="Salvar" />
						</ui:fragment>

						<p:commandButton styleClass="btn-x" icon="fa-solid fa-xmark"
							type="button"
							onclick="PF('dlgFunc').hide(); return false;"
							actionListener="#{funcionarioController.cancelarFuncionario()}"
							process="@this"
							ajax="false" />
					</div>

				</div>

				<div class="dialog-scroll">
				
				<div class="row">
					<div class="col-md-4">
						<div class="content-filter no-filter">
							<p:selectOneButton
								value="#{funcionarioController.funcionarioModel.status}"
								unselectable="false">
								<f:selectItem itemLabel="Ativo" itemValue="A" />
								<f:selectItem itemLabel="Inativo" itemValue="I" />
								<p:ajax update="@this" process="@this" />
							</p:selectOneButton>
						</div>
					</div>
				</div>

				<p:messages id="msgs" closable="true" showIcon="true"
					autoUpdate="true" />

				<div class="section-title mt10">
					<i class="fa-solid fa-user-shield"></i>
					<label>Dados de Acesso</label>
				</div>
				
                <div class="row">
					<div class="col-md-12">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Email *" />
							<p:inputText styleClass="senha-login" autocomplete="off"
								value="#{funcionarioController.funcionarioModel.usuario.login}" 
								placeholder="Digite o login" />
						</div>
					</div>
				</div>
				
				<div class="row">
                    <div class="col-md-6">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Senha *" />
							<p:password id="senhaFunc1" styleClass="senha-login" autocomplete="off"
								value="#{funcionarioController.funcionarioModel.usuario.senha}"
								feedback="true"
								weakLabel="Fraca" goodLabel="Média" strongLabel="Forte"
								promptLabel="Digite uma senha"
								placeholder="#{funcionarioController.editarModel eq 'A' ? 'Deixe em branco para manter a atual' : 'Digite a senha'}" />
						</div>
					</div>
					<div class="col-md-6">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Confirmar Senha *" />
							<p:password id="senhaFunc2" styleClass="senha-login" autocomplete="off"
								value="#{funcionarioController.confirmarSenha}"
								placeholder="#{funcionarioController.editarModel eq 'A' ? 'Deixe em branco para manter a atual' : 'Confirme a senha'}" />
						</div>
					</div>
				</div>
				
				<div class="section-title mt20">
					<i class="fa-solid fa-user"></i>
					<label>Dados Pessoais</label>
				</div>

				<div class="row">
					<div class="col-md-12">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Nome Completo *" />
							<p:inputText styleClass="senha-login" autocomplete="off"
								value="#{funcionarioController.funcionarioModel.nome}" 
								placeholder="Digite o nome completo" />
						</div>
					</div>
				</div>
				
				<div class="row">
					<div class="col-md-4">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="CPF *" />
							<p:inputMask mask="999.999.999-99" styleClass="senha-login"
								value="#{funcionarioController.funcionarioModel.cpf}" 
								placeholder="000.000.000-00" />
						</div>
					</div>
					<div class="col-md-4">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Data de Nascimento *" />
							<p:datePicker styleClass="senha-login" pattern="dd/MM/yyyy"
								value="#{funcionarioController.funcionarioModel.dataNascimento}" 
								showIcon="true" locale="pt" yearNavigator="true" 
								yearRange="1920:2024" maxdate="#{funcionarioController.hoje}" />
						</div>
					</div>
					<div class="col-md-4">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Selecionar gênero *" />
							<p:selectOneMenu styleClass="senha-login"
								value="#{funcionarioController.funcionarioModel.sexo}">
								<f:selectItem itemLabel="Selecione" itemValue="" />
								<f:selectItem itemLabel="Masculino" itemValue="M" />
								<f:selectItem itemLabel="Feminino" itemValue="F" />
								<f:selectItem itemLabel="Não definido" itemValue="O" />
							</p:selectOneMenu>
						</div>
					</div>
				</div>
				
				<div class="row">
					<div class="col-md-6">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Telefone *" />
							<p:inputMask mask="(99) 99999-9999" styleClass="senha-login"
								value="#{funcionarioController.funcionarioModel.telefone}" 
								placeholder="(00) 00000-0000" />
						</div>
					</div>
					<div class="col-md-6">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Data de Admissão *" />
							<p:datePicker styleClass="senha-login" pattern="dd/MM/yyyy"
								value="#{funcionarioController.funcionarioModel.dataAdmissao}" 
								showIcon="true" locale="pt" yearNavigator="true" 
								yearRange="2000:2030" maxdate="#{funcionarioController.hoje}"
								required="true" requiredMessage="Data de Admissão é obrigatória" />
						</div>
					</div>
				</div>
				
				<div class="section-title mt20">
					<i class="fa-solid fa-map-location-dot"></i>
					<label>Endereço</label>
				</div>
				
				<div class="row">
					<div class="col-md-3">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="CEP *" />
							<p:inputMask mask="99999-999" styleClass="senha-login"
								value="#{funcionarioController.funcionarioModel.cep}" />
						</div>
					</div>
					<div class="col-md-7">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Rua *" />
							<p:inputText styleClass="senha-login"
								value="#{funcionarioController.funcionarioModel.rua}" />
						</div>
					</div>
					<div class="col-md-2">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Número *" />
							<p:inputText styleClass="senha-login"
								value="#{funcionarioController.funcionarioModel.numero}" />
						</div>
					</div>
				</div>
				
				<div class="row">
					<div class="col-md-4">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Complemento" />
							<p:inputText styleClass="senha-login"
								value="#{funcionarioController.funcionarioModel.complemento}" />
						</div>
					</div>
					<div class="col-md-4">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Bairro *" />
							<p:inputText styleClass="senha-login"
								value="#{funcionarioController.funcionarioModel.bairro}" />
						</div>
					</div>
					<div class="col-md-3">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Cidade *" />
							<p:inputText styleClass="senha-login"
								value="#{funcionarioController.funcionarioModel.cidade}" />
						</div>
					</div>
					<div class="col-md-1">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="UF *" />
							<p:selectOneMenu styleClass="senha-login"
								value="#{funcionarioController.funcionarioModel.estado}">
								<f:selectItem itemLabel="UF" itemValue="" />
								<f:selectItem itemLabel="AC" itemValue="AC" />
								<f:selectItem itemLabel="AL" itemValue="AL" />
								<f:selectItem itemLabel="AP" itemValue="AP" />
								<f:selectItem itemLabel="AM" itemValue="AM" />
								<f:selectItem itemLabel="BA" itemValue="BA" />
								<f:selectItem itemLabel="CE" itemValue="CE" />
								<f:selectItem itemLabel="DF" itemValue="DF" />
								<f:selectItem itemLabel="ES" itemValue="ES" />
								<f:selectItem itemLabel="GO" itemValue="GO" />
								<f:selectItem itemLabel="MA" itemValue="MA" />
								<f:selectItem itemLabel="MT" itemValue="MT" />
								<f:selectItem itemLabel="MS" itemValue="MS" />
								<f:selectItem itemLabel="MG" itemValue="MG" />
								<f:selectItem itemLabel="PA" itemValue="PA" />
								<f:selectItem itemLabel="PB" itemValue="PB" />
								<f:selectItem itemLabel="PR" itemValue="PR" />
								<f:selectItem itemLabel="PE" itemValue="PE" />
								<f:selectItem itemLabel="PI" itemValue="PI" />
								<f:selectItem itemLabel="RJ" itemValue="RJ" />
								<f:selectItem itemLabel="RN" itemValue="RN" />
								<f:selectItem itemLabel="RS" itemValue="RS" />
								<f:selectItem itemLabel="RO" itemValue="RO" />
								<f:selectItem itemLabel="RR" itemValue="RR" />
								<f:selectItem itemLabel="SC" itemValue="SC" />
								<f:selectItem itemLabel="SP" itemValue="SP" />
								<f:selectItem itemLabel="SE" itemValue="SE" />
								<f:selectItem itemLabel="TO" itemValue="TO" />
							</p:selectOneMenu>
						</div>
					</div>
				</div>
				
				<div class="section-title mt20">
					<i class="fa-solid fa-comment-dots"></i>
					<label>Observações</label>
				</div>
				
				<div class="row">
					<div class="col-md-12">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Observações Gerais" />
							<p:inputTextarea styleClass="senha-login" rows="3" maxlength="500"
								value="#{funcionarioController.funcionarioModel.observacoes}"
								placeholder="Anotações sobre o funcionário..." />
						</div>
					</div>
				</div>
				
				<div class="section-title mt20">
					<i class="fa-solid fa-clock"></i>
					<label>Horários de Trabalho</label>
				</div>

				<div class="row mt20">
					<div class="col-md-4">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Hora Início" />
							<p:datePicker id="inputHoraInicio" timeOnly="true"
								validatorMessage="Hora inicial inválida. Use o formato HH:mm."
								pattern="HH:mm" 
								stepMinute="30"
								value="#{funcionarioController.dataInicial}"
								styleClass="senha-login" />
						</div>
					</div>

					<div class="col-md-4">
						<div class="input-combined">
							<p:outputLabel styleClass="title-input" value="Hora Fim" />
							<p:datePicker id="inputHoraFim" timeOnly="true"
								validatorMessage="Hora final inválida. Use o formato HH:mm."
								pattern="HH:mm" 
								stepMinute="30"
								value="#{funcionarioController.dataFinal}"
								styleClass="senha-login" />
						</div>
					</div>
		
					<div class="col-md-4 flex justify-center align-center">
						<p:commandButton update="msgs dttLstHorarios dttLstHorariosAux inputHoraInicio inputHoraFim chkDom chkSeg chkTer chkQua chkQui chkSex chkSab"
							process="@this inputHoraInicio inputHoraFim chkDom chkSeg chkTer chkQua chkQui chkSex chkSab"
							style="width: 100%; height: 40px;"
							actionListener="#{funcionarioController.novoHorario()}"
							class="btn btn-green" value="Adicionar Horário" 
							icon="fa fa-plus" />
					</div>
				
				</div>
				
				<div class="row mt20">
					<div class="col-md-12">
						<p:outputLabel styleClass="title-input" value="Dias da Semana" style="display: block; margin-bottom: 12px;" />
						<div class="dias-semana-container" style="background: #F8F9FA; border: 1px solid #E0E0E0; border-radius: 8px;  padding: 31px 16px 16px 16px; display: flex; justify-content: space-between; ">
							<div class="dia-checkbox" style="flex: 1; text-align: center;">
								<p:selectBooleanCheckbox value="#{funcionarioController.horarioModel.domingo}" id="chkDom">
									<p:ajax update="@this" />
								</p:selectBooleanCheckbox>
								<label for="chkDom" class="dia-label" style="margin-top: 8px; font-size: 13px; font-weight: 600;">Dom</label>
							</div>
							<div class="dia-checkbox" style="flex: 1; text-align: center;">
								<p:selectBooleanCheckbox value="#{funcionarioController.horarioModel.segunda}" id="chkSeg">
									<p:ajax update="@this" />
								</p:selectBooleanCheckbox>
								<label for="chkSeg" class="dia-label" style="margin-top: 8px; font-size: 13px; font-weight: 600;">Seg</label>
							</div>
							<div class="dia-checkbox" style="flex: 1; text-align: center;">
								<p:selectBooleanCheckbox value="#{funcionarioController.horarioModel.terca}" id="chkTer">
									<p:ajax update="@this" />
								</p:selectBooleanCheckbox>
								<label for="chkTer" class="dia-label" style="margin-top: 8px; font-size: 13px; font-weight: 600;">Ter</label>
							</div>
							<div class="dia-checkbox" style="flex: 1; text-align: center;">
								<p:selectBooleanCheckbox value="#{funcionarioController.horarioModel.quarta}" id="chkQua">
									<p:ajax update="@this" />
								</p:selectBooleanCheckbox>
								<label for="chkQua" class="dia-label" style="margin-top: 8px; font-size: 13px; font-weight: 600;">Qua</label>
							</div>
							<div class="dia-checkbox" style="flex: 1; text-align: center;">
								<p:selectBooleanCheckbox value="#{funcionarioController.horarioModel.quinta}" id="chkQui">
									<p:ajax update="@this" />
								</p:selectBooleanCheckbox>
								<label for="chkQui" class="dia-label" style="margin-top: 8px; font-size: 13px; font-weight: 600;">Qui</label>
							</div>
							<div class="dia-checkbox" style="flex: 1; text-align: center;">
								<p:selectBooleanCheckbox value="#{funcionarioController.horarioModel.sexta}" id="chkSex">
									<p:ajax update="@this" />
								</p:selectBooleanCheckbox>
								<label for="chkSex" class="dia-label" style="margin-top: 8px; font-size: 13px; font-weight: 600;">Sex</label>
							</div>
							<div class="dia-checkbox" style="flex: 1; text-align: center;">
								<p:selectBooleanCheckbox value="#{funcionarioController.horarioModel.sabado}" id="chkSab">
									<p:ajax update="@this" />
								</p:selectBooleanCheckbox>
								<label for="chkSab" class="dia-label" style="margin-top: 8px; font-size: 13px; font-weight: 600;">Sáb</label>
							</div>
						</div>
					</div>
				</div>
			
				
				<label class="title-item mt20 mb15">Horários Cadastrados</label>

				<ui:fragment rendered="#{funcionarioController.editarModel eq 'I'}">
					<p:dataList id="dttLstHorariosAux" paginator="true"
						paginatorPosition="bottom" rows="4"
						class="dataList-dialog-custom data-list-time"
						value="#{funcionarioController.lstHorarioAux}"
						emptyMessage="Nenhum horário adicionado" var="horario"
						rowIndexVar="index">

						<div class="list-time-extended">
							<div class="horario-info">
								<i class="fa-solid fa-clock"></i>
								<div>
									<label class="title-obj">Inicial</label> 
									<label class="subtitle-obj">#{horario.horaInicial}</label>
								</div>
								<div>
									<label>-</label>
								</div>
								<div>
									<label class="title-obj">Final</label> 
									<label class="subtitle-obj">#{horario.horaFinal}</label>
								</div>
							</div>
							<div class="dias-info">
								<span class="dia-badge #{horario.domingo ? 'ativo' : 'inativo'}">D</span>
								<span class="dia-badge #{horario.segunda ? 'ativo' : 'inativo'}">S</span>
								<span class="dia-badge #{horario.terca ? 'ativo' : 'inativo'}">T</span>
								<span class="dia-badge #{horario.quarta ? 'ativo' : 'inativo'}">Q</span>
								<span class="dia-badge #{horario.quinta ? 'ativo' : 'inativo'}">Q</span>
								<span class="dia-badge #{horario.sexta ? 'ativo' : 'inativo'}">S</span>
								<span class="dia-badge #{horario.sabado ? 'ativo' : 'inativo'}">S</span>
							</div>
							<p:commandButton update="dttLstHorariosAux" process="@this"
								styleClass="btn-trash"
								actionListener="#{funcionarioController.recebeValorDeleteHorarioAux(index)}"
								icon="fa-solid fa-trash"
								onclick="PF('dlgHoraAux').show()" />
						</div>

					</p:dataList>
				</ui:fragment>
				<ui:fragment rendered="#{funcionarioController.editarModel eq 'A'}">
					<p:dataList id="dttLstHorarios" rowIndexVar="index"
						class="dataList-dialog-custom data-list-time"
						value="#{funcionarioController.lstHorarioAux}" var="horario"
						paginator="true" paginatorPosition="bottom" rows="4"
						emptyMessage="Nenhum horário cadastrado para esse funcionário">

						<div class="list-time-extended">
							<div class="horario-info">
								<i class="fa-solid fa-clock"></i>
								<div>
									<label class="title-obj">Inicial</label> 
									<label class="subtitle-obj">#{horario.horaInicial}</label>
								</div>
								<div>
									<label>-</label>
								</div>
								<div>
									<label class="title-obj">Final</label> 
									<label class="subtitle-obj">#{horario.horaFinal}</label>
								</div>
							</div>
							<div class="dias-info">
								<span class="dia-badge #{horario.domingo ? 'ativo' : 'inativo'}">D</span>
								<span class="dia-badge #{horario.segunda ? 'ativo' : 'inativo'}">S</span>
								<span class="dia-badge #{horario.terca ? 'ativo' : 'inativo'}">T</span>
								<span class="dia-badge #{horario.quarta ? 'ativo' : 'inativo'}">Q</span>
								<span class="dia-badge #{horario.quinta ? 'ativo' : 'inativo'}">Q</span>
								<span class="dia-badge #{horario.sexta ? 'ativo' : 'inativo'}">S</span>
								<span class="dia-badge #{horario.sabado ? 'ativo' : 'inativo'}">S</span>
							</div>
							<p:commandButton update="dttLstHorarios" process="@this"
								styleClass="btn-trash"
								actionListener="#{funcionarioController.recebeValorDeleteHorarioAux(index)}"
								icon="fa-solid fa-trash"
								onclick="PF('dlgHoraAux').show()" />
						</div>

					</p:dataList>
				</ui:fragment>
				
				</div><!-- Fecha dialog-scroll -->

			</h:panelGroup>

		</p:dialog>

		<p:dialog id="dlgConfirm" widgetVar="dlgConfirm" modal="true"
			showEffect="fade" hideEffect="fade" closable="false"
			draggable="false" resizable="false">
			<h:panelGroup id="dlgConfirmForm">
				<div class="header-modal-confirm">
					<div>
						<label>Realmente deseja excluir esse funcionário?</label>
					</div>
				</div>

				<div class="flex align-center justify-center">
					<p:commandButton styleClass="btn medium btn-confirm"
						value="Confirmar"
						actionListener="#{funcionarioController.deletaFuncionario()}" />
					<p:commandButton styleClass="btn medium btn-cancel"
						value="Cancelar" onclick="PF('dlgConfirm').hide()" />
				</div>

			</h:panelGroup>

		</p:dialog>
		
		<!-- Modal de Confirmação de Exclusão de Funcionário com Agendamentos -->
		<p:dialog id="dlgConfirmarExclusaoFuncionario" widgetVar="dlgConfirmarExclusaoFuncionario" modal="true"
			showEffect="fade" hideEffect="fade" closable="false"
			draggable="false" resizable="false">
			<div class="header-modal-confirm">
				<div style="text-align: center;">
					<label style="font-size: 16px; font-weight: 600; color: #333; display: block; margin-bottom: 12px;">
						⚠️ Atenção: Exclusão de Funcionário
					</label>
					<label style="font-size: 14px; color: #666; line-height: 1.6; display: block; margin-bottom: 10px;">
						Este funcionário possui 
						<strong style="color: #E74A46;">#{funcionarioController.qtdAgendamentosAfetar}</strong> 
						agendamento(s) pendente(s).
					</label>
					<label style="font-size: 14px; color: #666; line-height: 1.6; display: block;">
						Ao excluir, todos os agendamentos serão <strong style="color: #E74A46;">cancelados automaticamente</strong>.
					</label>
					<label style="font-size: 13px; color: #999; margin-top: 15px; display: block;">
						Deseja continuar?
					</label>
				</div>
			</div>

			<div class="flex align-center justify-center">
				<p:commandButton styleClass="btn medium btn-confirm" 
					value="Sim, excluir"
					action="#{funcionarioController.confirmarExclusaoComCancelamento}"
					update="@form" />
				<p:commandButton styleClass="btn medium btn-cancel" 
					value="Não"
					onclick="PF('dlgConfirmarExclusaoFuncionario').hide(); return false;" />
			</div>
		</p:dialog>

		<p:dialog id="dlgHora" widgetVar="dlgHora" modal="true"
			showEffect="fade" hideEffect="fade" closable="false"
			draggable="false" resizable="false">
			<div class="header-modal-confirm">
				<div>
					<label>Realmente deseja excluir esse horário?</label>
				</div>
			</div>

			<div class="flex align-center justify-center">
				<p:commandButton styleClass="btn medium btn-confirm"
					value="Confirmar"
					actionListener="#{funcionarioController.deletaHorario()}" 
					process="@this"
					update="dlgFunc"
					oncomplete="PF('dlgHora').hide()"/>
				<p:commandButton styleClass="btn medium btn-cancel" value="Cancelar"
					onclick="PF('dlgHora').hide()" />
			</div>

		</p:dialog>

		<p:dialog id="dlgHoraAux" widgetVar="dlgHoraAux" modal="true"
			showEffect="fade" hideEffect="fade" closable="false"
			draggable="false" resizable="false">
			<div class="header-modal-confirm">
				<div>
					<label>Realmente deseja excluir esse horário?</label>
				</div>
			</div>

			<div class="flex align-center justify-center">
				<p:commandButton styleClass="btn medium btn-confirm"
					value="Confirmar"
					actionListener="#{funcionarioController.deletaHorarioAux()}"
					process="@this"
					update="dttLstHorarios dttLstHorariosAux"
					oncomplete="PF('dlgHoraAux').hide()"/>
				<p:commandButton styleClass="btn medium btn-cancel" value="Cancelar"
					onclick="PF('dlgHoraAux').hide()" />
			</div>
		</p:dialog>
		
		<!-- Modal de Confirmação ao Salvar (quando horários deletados têm agendamentos) -->
		<p:dialog id="dlgConfirmarExclusaoHorarioSalvar" widgetVar="dlgConfirmarExclusaoHorarioSalvar" modal="true"
			showEffect="fade" hideEffect="fade" closable="false"
			draggable="false" resizable="false">
			<div class="header-modal-confirm">
				<div style="text-align: center;">
					<label style="font-size: 16px; font-weight: 600; color: #333; display: block; margin-bottom: 12px;">
						⚠️ Atenção: Alteração em Horários
					</label>
					<label style="font-size: 14px; color: #666; line-height: 1.6; display: block; margin-bottom: 10px;">
						Os horários removidos possuem 
						<strong style="color: #E74A46;">#{funcionarioController.qtdAgendamentosAfetar}</strong> 
						agendamento(s) pendente(s).
					</label>
					<label style="font-size: 14px; color: #666; line-height: 1.6; display: block;">
						Todos esses agendamentos serão <strong style="color: #E74A46;">cancelados automaticamente</strong>.
					</label>
					<label style="font-size: 13px; color: #999; margin-top: 15px; display: block;">
						Deseja continuar?
					</label>
				</div>
			</div>

			<div class="flex align-center justify-center">
				<p:commandButton styleClass="btn medium btn-confirm" 
					value="Sim, salvar"
					action="#{funcionarioController.executarAtualizacaoFuncionario}"
					update="@form"
					process="@form" />
				<p:commandButton styleClass="btn medium btn-cancel" 
					value="Não"
					onclick="PF('dlgConfirmarExclusaoHorarioSalvar').hide(); return false;" />
			</div>
		</p:dialog>
		
		<!-- Modal de Confirmação ao Inativar Funcionário com Agendamentos -->
		<p:dialog id="dlgConfirmarInativarFuncionario" widgetVar="dlgConfirmarInativarFuncionario" modal="true"
			showEffect="fade" hideEffect="fade" closable="false"
			draggable="false" resizable="false">
			<div class="header-modal-confirm">
				<div style="text-align: center;">
					<label style="font-size: 16px; font-weight: 600; color: #333; display: block; margin-bottom: 12px;">
						⚠️ Atenção: Inativar Funcionário
					</label>
					<label style="font-size: 14px; color: #666; line-height: 1.6; display: block; margin-bottom: 10px;">
						Este funcionário possui 
						<strong style="color: #E74A46;">#{funcionarioController.qtdAgendamentosAfetar}</strong> 
						agendamento(s) pendente(s).
					</label>
					<label style="font-size: 14px; color: #666; line-height: 1.6; display: block;">
						Ao inativar, todos os agendamentos serão <strong style="color: #E74A46;">cancelados automaticamente</strong>.
					</label>
					<label style="font-size: 13px; color: #999; margin-top: 15px; display: block;">
						Deseja continuar?
					</label>
				</div>
			</div>

			<div class="flex align-center justify-center">
				<p:commandButton styleClass="btn medium btn-confirm" 
					value="Sim, inativar"
					action="#{funcionarioController.confirmarInativarFuncionario}"
					update="@form"
					process="@form" />
				<p:commandButton styleClass="btn medium btn-cancel" 
					value="Não"
					onclick="PF('dlgConfirmarInativarFuncionario').hide(); return false;" />
			</div>
		</p:dialog>
		
		<!-- Modal de Validação de Email -->
		<p:dialog id="dlgValidarEmailFuncionario" widgetVar="dlgValidarEmailFuncionario" modal="true" 
			showEffect="fade" hideEffect="fade" closable="false" draggable="false" resizable="false"
			styleClass="dialog-validar-email">
			<h:panelGroup id="dlgValidarEmailFuncionarioForm">
				
				<div class="header-modal">
					<div class="flex align-center">
						<div class="icon-circle">
							<i class="fa-solid fa-envelope-circle-check"></i>
						</div>
						<label>Validar Email</label>
					</div>
					<div class="flex align-center">
						<p:commandButton styleClass="btn-x" icon="fa-solid fa-xmark"
							onclick="PF('dlgValidarEmailFuncionario').hide()"/>
					</div>
				</div>

				<div style="padding: 20px 20px 0 20px; text-align: center;">
					<p style="margin-bottom: 25px; color: #666; font-size: 14px;">
						Digite o código de 6 dígitos enviado para<br/>
						<strong>#{funcionarioController.funcionarioModel.usuario.login}</strong>
					</p>

					<div class="input-combined" style="margin: 0 auto 25px auto; max-width: 280px;">
						<p:outputLabel styleClass="title-input" value="Código de Verificação *" />
						<p:inputText id="codigoValidacaoFuncionario" 
							value="#{funcionarioController.codigoValidacao}"
							maxlength="6"/>
					</div>
				</div>

				<div class="flex align-center justify-center" style="padding: 0 20px 20px 20px;">
					<p:commandButton value="Validar" 
						styleClass="btn medium btn-green"
						actionListener="#{funcionarioController.validarCodigoFuncionario()}"
						update="dlgValidarEmailFuncionarioForm"
						process="dlgValidarEmailFuncionarioForm"
						ajax="true"/>
						
					<p:commandButton value="Reenviar Código" 
						styleClass="btn medium btn-cancel"
						actionListener="#{funcionarioController.reenviarCodigoFuncionario()}"
						update="dlgValidarEmailFuncionarioForm"
						process="@this"/>
				</div>
			</h:panelGroup>
		</p:dialog>
		
		<script type="text/javascript">
			function confirmarExclusaoComCancelamento() {
				PF('statusDialog').show();
				
				// Chama o método do controller via remoteCommand
				excluirFuncionarioComCancelamento();
			}
		</script>
		
		<p:remoteCommand name="excluirFuncionarioComCancelamento" 
			actionListener="#{funcionarioController.confirmarExclusaoComCancelamento()}"
			update="form"
			oncomplete="PF('statusDialog').hide();" />
		
	</ui:define>

</ui:composition>
</html>